.. _dir-section:


Directory Structure
===================

The `cwd` parameter defined by the user at the instantiation of the Loss module becomes the root directory for storing all outputs and processed files.

Directory Tree
--------------

::

    cwd/
    ├── CHEER_Safe_data/           [C]
    │   ├── All_configs.csv        [C-1]
    │   ├── Lookup.pkl             [C-2]
    ├── Hazards/                   [H]
    │   ├── Hazard_X/              [H-1]
    │       ├── hazard_x.parquet/.shp  [H-1-1]
    ├── Inventory/                 [I]
    │   ├── Inventory_Y.parquet/.shp   [I-1]
    ├── Test/                      [T]
    ├── Intermediate_outputs/      [IO]
    ├── Inv_Updated_Hazard/        [IU]
    ├── Loss_estimates/            [L]
    │   ├── Hazard_X/              [L-1]
    │       ├── Inventory_Y/       [L-1-1]
    │           ├── Loss_DF.parquet        [L-1-1-1]
    │           ├── hazard_x.parquet/.shp  [L-1-1-2]
    │           ├── zones/                 [L-1-1-3]
    │               ├── zone_z/            [L-1-1-3-1]
    │                   ├── hazard_x.parquet  [L-1-1-3-1-1]
    ├── User_Output/               [UO]
        ├── Hazard_X/              [UO-1]
            ├── Inventory_Y/       [UO-1-1]
                ├── Loss_DF.csv         [UO-1-1-1]
                ├── zones/              [UO-1-1-2]
                    ├── zone_z/         [UO-1-1-2-1]
                    ├── zone_N.csv      [UO-1-1-2-2]
                        ├── hazard_x.csv    [UO-1-1-2-1-1]

Directory Descriptions
-----------------------

- **[C] `CHEER_Safe_data/`**: Contains essential input files for running the CHEER-Safe loss model.
  - **[C-1] `All_configs.csv`**: CSV file defining all model configurations, including combinations of building archetypes (M), year built, and coastal distance. It includes 48 total configuration entries.
  - **[C-2] `Lookup.pkl`**: Lookup table mapping `[M, C][Wind, Flood] → Loss` values generated from CHEER-Safe. A sample version is provided; users may replace this with their own.

- **[H] `Hazards/`**: Contains hazard data provided by the user.
  - **[H-1] `Hazard_X/`**: Subfolder for a specific hazard scenario (e.g., `TC_Wise`).
    - **[H-1-1] `hazard_x.parquet` / `.shp`**: The spatial hazard intensity data (wind, flood) as point geometries.

- **[I] `Inventory/`**: Contains inventory files provided by the user.
  - **[I-1] `Inventory_Y.parquet` / `.shp`**: The processed building inventory. Files must be imputed with no missing values (rows with missing values are dropped).

- **[T] `Test/`**: Optional sample data downloaded by the user to test model functionality.

- **[IO] `Intermediate_outputs/`**: Stores intermediate files generated during loss computations.

- **[IU] `Inv_Updated_Hazard/`**: Contains hazard-adjusted inventory files created as part of intermediate processing.

- **[L] `Loss_estimates/`**: Directory where final `.parquet`-based loss estimates are stored.
  - **[L-1] `Hazard_X/`**: Folder for each hazard analyzed.
    - **[L-1-1] `Inventory_Y/`**: Folder for loss results tied to a specific inventory.
      - **[L-1-1-1] `Loss_DF.parquet`**: Total loss estimates per hazard instance, across all buildings.
      - **[L-1-1-2] `hazard_x.parquet` / `.shp`**: Detailed loss estimates in million dollars for each building.
      - **[L-1-1-3] `zones/`**: Folder containing zone-level losses, if zoning was applied.
        - **[L-1-1-3-1] `zone_z/`**: Folder for a specific zone system.
          - **[L-1-1-3-1-1] `hazard_x.parquet`**: Zone-specific losses for each building within `zone_z`.

- **[UO] `User_Output/`**: Final output summaries in `.csv` format for easier user access.
  - **[UO-1] `Hazard_X/`**: Folder for a specific hazard scenario.
    - **[UO-1-1] `Inventory_Y/`**: Subfolder for a given inventory.
      - **[UO-1-1-1] `Loss_DF.csv`**: CSV file of total losses for all buildings.
      - **[UO-1-1-2] `zones/`**: Folder for zone-level CSV outputs.
        - **[UO-1-1-2-1] `zone_z/`**: Folder for a specific zone system.
          - **[UO-1-1-2-1-1] `hazard_x.csv`**: Losses for buildings in `zone_z` under hazard instance `hazard_x`.
        - **[UO-1-1-2-2] `zone_N.csv`**: Optional summary CSV of zone-level losses.

